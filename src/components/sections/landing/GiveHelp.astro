---
import SecondaryCTA from "@components/ui/buttons/SecondaryCTA.astro";
import { SITE } from "@/data_files/constants";
import bg2 from "@images/bg-2.png";
import { Image } from "astro:assets";

const title = `Kami siap membantu Anda`;
const subTitle = `Hubungi kami hari ini dan wujudkan ide kreatif Anda bersama <b>${SITE.title}</b>!`;
---

<section class="relative min-w-screen w-screen default-p 2xl:max-w-full my-12 h-[65dvh] md:h-[35dvh] flex items-center overflow-hidden">
  <!-- Background Image Container -->
  <div class="bg-container absolute inset-0 w-[150dvw] h-full overflow-hidden">
    <div
      class="bg-image w-[150dvw] h-full absolute bg-cover bg-center"
      style={`background-image: url(${bg2.src});`}
    ></div>
  </div>

  <!-- Red Overlay -->
  <div class="absolute inset-0 bg-redP bg-opacity-85"></div>

  <!-- Text Content -->
  <div class="relative z-10 flex flex-col items-start gap-6 w-full text-white">
    <div class="flex flex-row justify-between items-center w-full">
      <div class="flex flex-col gap-y-2">
        <h1 class="font-oswald text-balance text-2xl font-bold tracking-tight md:text-6xl md:leading-tight">
          <Fragment set:html={title} />
        </h1>
        <h3 class="text-balance text-lg md:text-base md:leading-tight">
          <Fragment set:html={subTitle} />
        </h3>
      </div>
      <SecondaryCTA title="Contact Us Now" url="/contact" noArrow={true} />
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.timeline({
    scrollTrigger: {
      trigger: ".bg-container", // Ensures the image moves within its section
      start: "top bottom",
      end: "bottom top",
      scrub: true,
    }
  })
  .fromTo(
    ".bg-image",
    { y: "20%", opacity: 0.4 },
    { y: "-15%", opacity: 1, ease: "none" }
  );  
</script>